<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Day 5 - building workflows | DLL 2021, R section</title>
  <meta name="description" content="A living syllabus for the R section of DLL 2021, at Stanford" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Day 5 - building workflows | DLL 2021, R section" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A living syllabus for the R section of DLL 2021, at Stanford" />
  <meta name="github-repo" content="darachm/dll-r" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Day 5 - building workflows | DLL 2021, R section" />
  
  <meta name="twitter:description" content="A living syllabus for the R section of DLL 2021, at Stanford" />
  

<meta name="author" content="darachm" />
<meta name="author" content="etc?" />
<meta name="author" content="etc?" />
<meta name="author" content="etc?" />


<meta name="date" content="2021-06-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="day-4-tidyverse-and-plots-and-such.html"/>
<link rel="next" href="appendix.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">DLL 2021 R workshops</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Workshop introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#course-intent"><i class="fa fa-check"></i><b>1.1</b> Course intent</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#structure-and-resources"><i class="fa fa-check"></i><b>1.2</b> Structure and resources</a><ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#this-syllabus-and-videos"><i class="fa fa-check"></i><b>1.2.1</b> This syllabus and videos</a></li>
<li class="chapter" data-level="1.2.2" data-path="index.html"><a href="index.html#slack-channel"><i class="fa fa-check"></i><b>1.2.2</b> Slack channel</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#expectations"><i class="fa fa-check"></i><b>1.3</b> Expectations</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="day-3-intoduction-to-r.html"><a href="day-3-intoduction-to-r.html"><i class="fa fa-check"></i><b>2</b> Day 3 - intoduction to R</a><ul>
<li class="chapter" data-level="2.1" data-path="day-3-intoduction-to-r.html"><a href="day-3-intoduction-to-r.html#rstudio-and-basics"><i class="fa fa-check"></i><b>2.1</b> Rstudio, and basics</a></li>
<li class="chapter" data-level="2.2" data-path="day-3-intoduction-to-r.html"><a href="day-3-intoduction-to-r.html#data-exploration-pipelines"><i class="fa fa-check"></i><b>2.2</b> Data exploration pipelines</a></li>
<li class="chapter" data-level="2.3" data-path="day-3-intoduction-to-r.html"><a href="day-3-intoduction-to-r.html#getting-started-in-r"><i class="fa fa-check"></i><b>2.3</b> Getting started in R</a><ul>
<li class="chapter" data-level="2.3.1" data-path="day-3-intoduction-to-r.html"><a href="day-3-intoduction-to-r.html#getting-help-in-r"><i class="fa fa-check"></i><b>2.3.1</b> Getting Help in R</a></li>
<li class="chapter" data-level="2.3.2" data-path="day-3-intoduction-to-r.html"><a href="day-3-intoduction-to-r.html#variables"><i class="fa fa-check"></i><b>2.3.2</b> Variables</a></li>
<li class="chapter" data-level="2.3.3" data-path="day-3-intoduction-to-r.html"><a href="day-3-intoduction-to-r.html#working-with-vectors"><i class="fa fa-check"></i><b>2.3.3</b> Working with Vectors</a></li>
<li class="chapter" data-level="2.3.4" data-path="day-3-intoduction-to-r.html"><a href="day-3-intoduction-to-r.html#indexing-and-subsetting"><i class="fa fa-check"></i><b>2.3.4</b> Indexing and Subsetting</a></li>
<li class="chapter" data-level="2.3.5" data-path="day-3-intoduction-to-r.html"><a href="day-3-intoduction-to-r.html#using-logicals"><i class="fa fa-check"></i><b>2.3.5</b> Using Logicals</a></li>
<li class="chapter" data-level="2.3.6" data-path="day-3-intoduction-to-r.html"><a href="day-3-intoduction-to-r.html#working-with-dataframes"><i class="fa fa-check"></i><b>2.3.6</b> Working with Dataframes</a></li>
<li class="chapter" data-level="2.3.7" data-path="day-3-intoduction-to-r.html"><a href="day-3-intoduction-to-r.html#type-coercion-and-factors"><i class="fa fa-check"></i><b>2.3.7</b> Type Coercion and Factors</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="day-4-tidyverse-and-plots-and-such.html"><a href="day-4-tidyverse-and-plots-and-such.html"><i class="fa fa-check"></i><b>3</b> Day 4 - tidyverse and plots and such</a><ul>
<li class="chapter" data-level="3.1" data-path="day-4-tidyverse-and-plots-and-such.html"><a href="day-4-tidyverse-and-plots-and-such.html#reading-files"><i class="fa fa-check"></i><b>3.1</b> Reading files</a></li>
<li class="chapter" data-level="3.2" data-path="day-4-tidyverse-and-plots-and-such.html"><a href="day-4-tidyverse-and-plots-and-such.html#making-plots-with-ggplot2"><i class="fa fa-check"></i><b>3.2</b> Making plots with ggplot2</a><ul>
<li class="chapter" data-level="3.2.1" data-path="day-4-tidyverse-and-plots-and-such.html"><a href="day-4-tidyverse-and-plots-and-such.html#getting-started-with-a-ggplot"><i class="fa fa-check"></i><b>3.2.1</b> Getting started with a ggplot</a></li>
<li class="chapter" data-level="3.2.2" data-path="day-4-tidyverse-and-plots-and-such.html"><a href="day-4-tidyverse-and-plots-and-such.html#plotting-numerical-vs.-categorical-data"><i class="fa fa-check"></i><b>3.2.2</b> Plotting Numerical vs.¬†Categorical Data</a></li>
<li class="chapter" data-level="3.2.3" data-path="day-4-tidyverse-and-plots-and-such.html"><a href="day-4-tidyverse-and-plots-and-such.html#plotting-error-bars"><i class="fa fa-check"></i><b>3.2.3</b> Plotting Error Bars</a></li>
<li class="chapter" data-level="3.2.4" data-path="day-4-tidyverse-and-plots-and-such.html"><a href="day-4-tidyverse-and-plots-and-such.html#plotting-trends-in-big-data"><i class="fa fa-check"></i><b>3.2.4</b> Plotting Trends in Big Data</a></li>
<li class="chapter" data-level="3.2.5" data-path="day-4-tidyverse-and-plots-and-such.html"><a href="day-4-tidyverse-and-plots-and-such.html#saving-your-figures"><i class="fa fa-check"></i><b>3.2.5</b> Saving Your Figures</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html"><i class="fa fa-check"></i><b>4</b> Day 5 - building workflows</a><ul>
<li class="chapter" data-level="4.1" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#using-code-many-times---loops"><i class="fa fa-check"></i><b>4.1</b> Using code many times - loops</a><ul>
<li class="chapter" data-level="4.1.1" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#doing-things-multiple-times"><i class="fa fa-check"></i><b>4.1.1</b> Doing things multiple times</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#go-ahead-and-do-this-for-all-242-proteins"><i class="fa fa-check"></i><b>4.2</b> Go ahead and do this for all 242 proteins</a></li>
<li class="chapter" data-level="4.3" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#writing-reusable-code"><i class="fa fa-check"></i><b>4.3</b> Writing (re)usable code</a><ul>
<li class="chapter" data-level="4.3.1" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#style-guides-can-be-inspiring"><i class="fa fa-check"></i><b>4.3.1</b> Style guides can be inspiring</a></li>
<li class="chapter" data-level="4.3.2" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#what-style-should-you-use"><i class="fa fa-check"></i><b>4.3.2</b> What style should you use?</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#writing-modular-code"><i class="fa fa-check"></i><b>4.4</b> Writing modular code</a><ul>
<li class="chapter" data-level="4.4.1" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#calculating-standard-error"><i class="fa fa-check"></i><b>4.4.1</b> Calculating standard error</a></li>
<li class="chapter" data-level="4.4.2" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#more-complex-modules"><i class="fa fa-check"></i><b>4.4.2</b> More complex modules</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#packages-are-chunks-of-code-and-sometimes-data"><i class="fa fa-check"></i><b>4.5</b> Packages are chunks of code (and sometimes data)</a><ul>
<li class="chapter" data-level="4.5.1" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#first-stop---cran"><i class="fa fa-check"></i><b>4.5.1</b> first stop - CRAN</a></li>
<li class="chapter" data-level="4.5.2" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#how-does-this-package-work"><i class="fa fa-check"></i><b>4.5.2</b> How does this package work?</a></li>
<li class="chapter" data-level="4.5.3" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#next-stop---github"><i class="fa fa-check"></i><b>4.5.3</b> next stop - github</a></li>
<li class="chapter" data-level="4.5.4" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#finally---bioconductor"><i class="fa fa-check"></i><b>4.5.4</b> finally - Bioconductor üò¨</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#finding-more-help-and-documentation"><i class="fa fa-check"></i><b>4.6</b> Finding more help and documentation</a></li>
<li class="chapter" data-level="4.7" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#reproducibility-and-sharing"><i class="fa fa-check"></i><b>4.7</b> Reproducibility and sharing</a></li>
<li class="chapter" data-level="4.8" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#reproducibile-sharing---more-rmarkdown-and"><i class="fa fa-check"></i><b>4.8</b> Reproducibile sharing - more <code>rmarkdown</code> and</a><ul>
<li class="chapter" data-level="4.8.1" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#rmarkdown-package"><i class="fa fa-check"></i><b>4.8.1</b> rmarkdown package</a></li>
<li><a href="day-5-building-workflows.html#section"></a></li>
<li class="chapter" data-level="4.8.2" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#sharing-with-others"><i class="fa fa-check"></i><b>4.8.2</b> Sharing with others</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#troubleshooting-getting-help-dissecting-problems"><i class="fa fa-check"></i><b>4.9</b> Troubleshooting, getting help, dissecting problems</a><ul>
<li class="chapter" data-level="4.9.1" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#places-to-look-for-help"><i class="fa fa-check"></i><b>4.9.1</b> Places to look for help</a></li>
<li class="chapter" data-level="4.9.2" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#minimum-reproducible-example"><i class="fa fa-check"></i><b>4.9.2</b> Minimum reproducible example</a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="day-5-building-workflows.html"><a href="day-5-building-workflows.html#conclusion-other-concepts"><i class="fa fa-check"></i><b>4.10</b> Conclusion, other concepts</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>5</b> Appendix</a><ul>
<li class="chapter" data-level="5.1" data-path="appendix.html"><a href="appendix.html#additional-tutorials"><i class="fa fa-check"></i><b>5.1</b> Additional tutorials</a><ul>
<li class="chapter" data-level="5.1.1" data-path="appendix.html"><a href="appendix.html#sub-sub-section"><i class="fa fa-check"></i><b>5.1.1</b> sub sub section</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="appendix.html"><a href="appendix.html#more-challenges"><i class="fa fa-check"></i><b>5.2</b> More challenges</a></li>
<li class="chapter" data-level="5.3" data-path="appendix.html"><a href="appendix.html#figures-ideas"><i class="fa fa-check"></i><b>5.3</b> Figures ideas</a></li>
<li class="chapter" data-level="5.4" data-path="appendix.html"><a href="appendix.html#rmd-example-of-code-chunk"><i class="fa fa-check"></i><b>5.4</b> Rmd example of code chunk</a></li>
<li class="chapter" data-level="5.5" data-path="appendix.html"><a href="appendix.html#more-example-rmds"><i class="fa fa-check"></i><b>5.5</b> More example Rmds</a></li>
<li class="chapter" data-level="5.6" data-path="appendix.html"><a href="appendix.html#how-to-edit-this-document"><i class="fa fa-check"></i><b>5.6</b> How to edit this document</a><ul>
<li class="chapter" data-level="5.6.1" data-path="appendix.html"><a href="appendix.html#setup"><i class="fa fa-check"></i><b>5.6.1</b> Setup</a></li>
<li class="chapter" data-level="5.6.2" data-path="appendix.html"><a href="appendix.html#editwork-on-it"><i class="fa fa-check"></i><b>5.6.2</b> Edit/work on it</a></li>
<li class="chapter" data-level="5.6.3" data-path="appendix.html"><a href="appendix.html#publishing-onto-the-main-page-so-its-hosted-at-the-url"><i class="fa fa-check"></i><b>5.6.3</b> Publishing onto the main page, so it‚Äôs hosted at the URL</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="appendix.html"><a href="appendix.html#more-links"><i class="fa fa-check"></i><b>5.7</b> More links</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">DLL 2021, R section</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="day-5---building-workflows" class="section level1">
<h1><span class="header-section-number">4</span> Day 5 - building workflows</h1>
<p>Today we‚Äôre going to learn about applying these R
skills to
repeat, reproduce, extend, and share your analyses.</p>
<p>First, let‚Äôs review the last two days.</p>
<!-- exercise -->
<ul>
<li>What have we done?</li>
<li>How do we do it many times?</li>
<li>Crack open your code - can you use it again?</li>
<li>Can you adapt it to modify your question,
feed in new data, and modify the
scientifically-important bits easily?</li>
<li>Can you share it with someone and they follow
along?</li>
</ul>

<div id="using-code-many-times---loops" class="section level2">
<h2><span class="header-section-number">4.1</span> Using code many times - loops</h2>
<p>You will want to do the same thing multiple
times - automation is great. Let‚Äôs code up a
simple little analysis - we‚Äôll calculate the
length (number of amino acids) in a viral
structural protein sequence.</p>
<hr />
<p>These files are in ‚Äúdata‚Äù.</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb153-1" title="1">viral_protein_data &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb153-2" title="2"><span class="st">  </span><span class="kw">read.delim</span>(<span class="st">&quot;data/viral_structural_proteins/viral_proteins_001.tsv&quot;</span>,</a>
<a class="sourceLine" id="cb153-3" title="3">    <span class="dt">sep=</span><span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>,<span class="dt">header=</span>F)</a>
<a class="sourceLine" id="cb153-4" title="4">viral_protein_data</a></code></pre></div>
<pre><code>##                                       V1               V2
## 1 YP_009507797.1 structural polyprotein  Everglades virus
##                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       V3
## 1 MFPFQPMYPMQPMPYRNPFAAPRRPWFPRTDPFLAMQVQELTRSMANLTFKQRRGAPPEGPPAKKSKREAPQKQRGGQRKKKKNEGKKKAKTGPPNLKTQNGNKKKTNKKPGKRQRMVMKLESDKTFPIMLEGKINGYACVVGGKLFRPMHVEGKIDNDVLAALKTKKASKYDLEYADVPQNMRADTFKYTHEKPQGYYSWHHGAVQYENGRFTVPRGVGARGDSGRPILDNQGRVVAIVLGGVNEGSRTALSVVMWNEKGVTVKYTPENCEQWSLVTTMCLLANVTFPCAQPPICYDRKPAETLAMLSANVDNPGYDELLKAAVTCPGRKRRSTEELFKEYKLTRPYMARCVRCAVGSCHSPIAIEAVKSDGHDGYVRLQTSSQYGLDPSGNLKSRTMRYNMYGTIEEIPLHQVSLHTSRPCHIVDGHGYFLLARCPAGDSITMEFKKDSVTHSCSVPYEVKFNPVGRELYTHPPEHGAEQACQVYAHDAQNRGAYVEMHLPGSEVDSSLVSLSSGLVSVTPPAGTSALVECECSGTTISKTINKTKQFSQCTKKEQCRAYRLQNDKWVYNSDKLPKAAGATLKGKLHVPFLLADGKCTVPLAPEPMITFGFRSVSLKLHPKYPTYLTTRELADEPHYTHELISEPSVRNFSVTAKGWEFVWGNHPPKRFWAQETAPGNPHGLPHEVIVHYYHRYPMSTITGLSICAAIVAVSIAASTWLLCRSRASCLTPYRLTPNAKMPLCLAVLCCARSARAETTWESLDHLWNNNQQMFWTQLLIPLAALIVVTRLLKCMCCVVPFLVVAGAAGAGAYEHATTMPNQAGISYNTIVNRAGYAPLPISITPTKIKLIPTVNLEYVTCHYKTGMDSPTIKCCGSQECTPTYRPDEQCKVFAGVYPFMWGGAYCFCDTENTQISKAYVMKSEDCLADHAAAYKAHTASVQALLNITVGEHSTVTTVYVNGETPVNFNGVKLTAGPLSTAWTPFDRKIVQYAGEIYNYDFPEYGAGQPGAFGDIQLRTVSSSDLYANTNLVLQRPKAGAIHVPYTQAPSGFEQWKKDKAPSLKFTAPFGCEIYTNPIRAENCAVGSIPLAFDIPDALFTRVSETPTLSAAECTLNECVYSSDFGGIATVKYSASKSGKCAVHVPSGTATLKEASVELAEQGSVTIHFSTANIHPEFRLQICTSFVTCKGDCHPPKDHIVTHPQYHAQTFTAAVSKTAWTWLTSLLGGSAVIIIIGLVLATLVAMYVLTNQKHN</code></pre>
<p>How do we access the protein sequence? (<code>V3</code>)</p>
<p>How do we calculate the number of characters in
this sequence?</p>
<!-- ??"number of characters" -->
<p>Code it up!</p>
<hr />
<div id="doing-things-multiple-times" class="section level3">
<h3><span class="header-section-number">4.1.1</span> Doing things multiple times</h3>
<p>Let‚Äôs do this for all the proteins.
The simplest way of doing this is to copy and
paste it.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb155-1" title="1">viral_protein_data &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb155-2" title="2"><span class="st">  </span><span class="kw">read.delim</span>(<span class="st">&quot;data/viral_structural_proteins/viral_proteins_002.tsv&quot;</span>,</a>
<a class="sourceLine" id="cb155-3" title="3">      <span class="dt">sep=</span><span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>,<span class="dt">header=</span>F, <span class="dt">as.is=</span>T)</a>
<a class="sourceLine" id="cb155-4" title="4"><span class="kw">nchar</span>(viral_protein_data<span class="op">$</span>V3[[<span class="dv">1</span>]])</a></code></pre></div>
<pre><code>## [1] 177</code></pre>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb157-1" title="1">viral_protein_data &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb157-2" title="2"><span class="st">  </span><span class="kw">read.delim</span>(<span class="st">&quot;data/viral_structural_proteins/viral_proteins_003.tsv&quot;</span>,</a>
<a class="sourceLine" id="cb157-3" title="3">      <span class="dt">sep=</span><span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>,<span class="dt">header=</span>F, <span class="dt">as.is=</span>T)</a>
<a class="sourceLine" id="cb157-4" title="4"><span class="kw">nchar</span>(viral_protein_data[<span class="dv">1</span>,<span class="st">&quot;V3&quot;</span>])</a></code></pre></div>
<pre><code>## [1] 137</code></pre>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb159-1" title="1">viral_protein_data &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb159-2" title="2"><span class="st">  </span><span class="kw">read.delim</span>(<span class="st">&quot;data/viral_structural_proteins/viral_proteins_004.tsv&quot;</span>,</a>
<a class="sourceLine" id="cb159-3" title="3">      <span class="dt">sep=</span><span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>,<span class="dt">header=</span>F, <span class="dt">as.is=</span>T)</a>
<a class="sourceLine" id="cb159-4" title="4"><span class="kw">nchar</span>(viral_protein_data[<span class="dv">1</span>,<span class="dv">3</span>])</a></code></pre></div>
<pre><code>## [1] 117</code></pre>
</div>
</div>
<div id="go-ahead-and-do-this-for-all-242-proteins" class="section level2">
<h2><span class="header-section-number">4.2</span> Go ahead and do this for all 242 proteins</h2>
<p>‚Ä¶ just kidding.</p>
<p>Try this:</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb161-1" title="1"><span class="kw">list.files</span>(<span class="dt">path=</span><span class="st">&quot;data/viral_structural_proteins&quot;</span>,</a>
<a class="sourceLine" id="cb161-2" title="2">  <span class="dt">pattern=</span><span class="st">&quot;.*tsv&quot;</span>)</a></code></pre></div>
<pre><code>##   [1] &quot;viral_proteins_000.tsv&quot;        &quot;viral_proteins_001.tsv&quot;       
##   [3] &quot;viral_proteins_002.tsv&quot;        &quot;viral_proteins_003.tsv&quot;       
##   [5] &quot;viral_proteins_004.tsv&quot;        &quot;viral_proteins_005.tsv&quot;       
##   [7] &quot;viral_proteins_006.tsv&quot;        &quot;viral_proteins_007.tsv&quot;       
##   [9] &quot;viral_proteins_008.tsv&quot;        &quot;viral_proteins_009.tsv&quot;       
##  [11] &quot;viral_proteins_010.tsv&quot;        &quot;viral_proteins_011.tsv&quot;       
##  [13] &quot;viral_proteins_012.tsv&quot;        &quot;viral_proteins_013.tsv&quot;       
##  [15] &quot;viral_proteins_014.tsv&quot;        &quot;viral_proteins_015.tsv&quot;       
##  [17] &quot;viral_proteins_016.tsv&quot;        &quot;viral_proteins_017.tsv&quot;       
##  [19] &quot;viral_proteins_018.tsv&quot;        &quot;viral_proteins_019.tsv&quot;       
##  [21] &quot;viral_proteins_020.tsv&quot;        &quot;viral_proteins_021.tsv&quot;       
##  [23] &quot;viral_proteins_022.tsv&quot;        &quot;viral_proteins_023.tsv&quot;       
##  [25] &quot;viral_proteins_024.tsv&quot;        &quot;viral_proteins_025.tsv&quot;       
##  [27] &quot;viral_proteins_026.tsv&quot;        &quot;viral_proteins_027.tsv&quot;       
##  [29] &quot;viral_proteins_028.tsv&quot;        &quot;viral_proteins_029.tsv&quot;       
##  [31] &quot;viral_proteins_030.tsv&quot;        &quot;viral_proteins_031.tsv&quot;       
##  [33] &quot;viral_proteins_032.tsv&quot;        &quot;viral_proteins_033.tsv&quot;       
##  [35] &quot;viral_proteins_034.tsv&quot;        &quot;viral_proteins_035.tsv&quot;       
##  [37] &quot;viral_proteins_036.tsv&quot;        &quot;viral_proteins_037.tsv&quot;       
##  [39] &quot;viral_proteins_038.tsv&quot;        &quot;viral_proteins_039.tsv&quot;       
##  [41] &quot;viral_proteins_040.tsv&quot;        &quot;viral_proteins_041.tsv&quot;       
##  [43] &quot;viral_proteins_042.tsv&quot;        &quot;viral_proteins_043.tsv&quot;       
##  [45] &quot;viral_proteins_044.tsv&quot;        &quot;viral_proteins_045.tsv&quot;       
##  [47] &quot;viral_proteins_046.tsv&quot;        &quot;viral_proteins_047.tsv&quot;       
##  [49] &quot;viral_proteins_048.tsv&quot;        &quot;viral_proteins_049.tsv&quot;       
##  [51] &quot;viral_proteins_050.tsv&quot;        &quot;viral_proteins_051.tsv&quot;       
##  [53] &quot;viral_proteins_052.tsv&quot;        &quot;viral_proteins_053.tsv&quot;       
##  [55] &quot;viral_proteins_054.tsv&quot;        &quot;viral_proteins_055.tsv&quot;       
##  [57] &quot;viral_proteins_056.tsv&quot;        &quot;viral_proteins_057.tsv&quot;       
##  [59] &quot;viral_proteins_058.tsv&quot;        &quot;viral_proteins_059.tsv&quot;       
##  [61] &quot;viral_proteins_060.tsv&quot;        &quot;viral_proteins_061.tsv&quot;       
##  [63] &quot;viral_proteins_062.tsv&quot;        &quot;viral_proteins_063.tsv&quot;       
##  [65] &quot;viral_proteins_064.tsv&quot;        &quot;viral_proteins_065.tsv&quot;       
##  [67] &quot;viral_proteins_066.tsv&quot;        &quot;viral_proteins_067.tsv&quot;       
##  [69] &quot;viral_proteins_068.tsv&quot;        &quot;viral_proteins_069.tsv&quot;       
##  [71] &quot;viral_proteins_070.tsv&quot;        &quot;viral_proteins_071.tsv&quot;       
##  [73] &quot;viral_proteins_072.tsv&quot;        &quot;viral_proteins_073.tsv&quot;       
##  [75] &quot;viral_proteins_074.tsv&quot;        &quot;viral_proteins_075.tsv&quot;       
##  [77] &quot;viral_proteins_076.tsv&quot;        &quot;viral_proteins_077.tsv&quot;       
##  [79] &quot;viral_proteins_078.tsv&quot;        &quot;viral_proteins_079.tsv&quot;       
##  [81] &quot;viral_proteins_080.tsv&quot;        &quot;viral_proteins_081.tsv&quot;       
##  [83] &quot;viral_proteins_082.tsv&quot;        &quot;viral_proteins_083.tsv&quot;       
##  [85] &quot;viral_proteins_084.tsv&quot;        &quot;viral_proteins_085.tsv&quot;       
##  [87] &quot;viral_proteins_086.tsv&quot;        &quot;viral_proteins_087.tsv&quot;       
##  [89] &quot;viral_proteins_088.tsv&quot;        &quot;viral_proteins_089.tsv&quot;       
##  [91] &quot;viral_proteins_090.tsv&quot;        &quot;viral_proteins_091.tsv&quot;       
##  [93] &quot;viral_proteins_092.tsv&quot;        &quot;viral_proteins_093.tsv&quot;       
##  [95] &quot;viral_proteins_094.tsv&quot;        &quot;viral_proteins_095.tsv&quot;       
##  [97] &quot;viral_proteins_096.tsv&quot;        &quot;viral_proteins_097.tsv&quot;       
##  [99] &quot;viral_proteins_098.tsv&quot;        &quot;viral_proteins_099.tsv&quot;       
## [101] &quot;viral_proteins_100.tsv&quot;        &quot;viral_proteins_101.tsv&quot;       
## [103] &quot;viral_proteins_102.tsv&quot;        &quot;viral_proteins_103.tsv&quot;       
## [105] &quot;viral_proteins_104.tsv&quot;        &quot;viral_proteins_105.tsv&quot;       
## [107] &quot;viral_proteins_106.tsv&quot;        &quot;viral_proteins_107.tsv&quot;       
## [109] &quot;viral_proteins_108.tsv&quot;        &quot;viral_proteins_109.tsv&quot;       
## [111] &quot;viral_proteins_110.tsv&quot;        &quot;viral_proteins_111.tsv&quot;       
## [113] &quot;viral_proteins_112.tsv&quot;        &quot;viral_proteins_113.tsv&quot;       
## [115] &quot;viral_proteins_114.tsv&quot;        &quot;viral_proteins_115.tsv&quot;       
## [117] &quot;viral_proteins_116.tsv&quot;        &quot;viral_proteins_117.tsv&quot;       
## [119] &quot;viral_proteins_118.tsv&quot;        &quot;viral_proteins_119.tsv&quot;       
## [121] &quot;viral_proteins_120.tsv&quot;        &quot;viral_proteins_121.tsv&quot;       
## [123] &quot;viral_proteins_122.tsv&quot;        &quot;viral_proteins_123.tsv&quot;       
## [125] &quot;viral_proteins_124.tsv&quot;        &quot;viral_proteins_125.tsv&quot;       
## [127] &quot;viral_proteins_126.tsv&quot;        &quot;viral_proteins_127.tsv&quot;       
## [129] &quot;viral_proteins_128.tsv&quot;        &quot;viral_proteins_129.tsv&quot;       
## [131] &quot;viral_proteins_130.tsv&quot;        &quot;viral_proteins_131.tsv&quot;       
## [133] &quot;viral_proteins_132.tsv&quot;        &quot;viral_proteins_133.tsv&quot;       
## [135] &quot;viral_proteins_134.tsv&quot;        &quot;viral_proteins_135.tsv&quot;       
## [137] &quot;viral_proteins_136.tsv&quot;        &quot;viral_proteins_137.tsv&quot;       
## [139] &quot;viral_proteins_138.tsv&quot;        &quot;viral_proteins_139.tsv&quot;       
## [141] &quot;viral_proteins_140.tsv&quot;        &quot;viral_proteins_141.tsv&quot;       
## [143] &quot;viral_proteins_142.tsv&quot;        &quot;viral_proteins_143.tsv&quot;       
## [145] &quot;viral_proteins_144.tsv&quot;        &quot;viral_proteins_145.tsv&quot;       
## [147] &quot;viral_proteins_146.tsv&quot;        &quot;viral_proteins_147.tsv&quot;       
## [149] &quot;viral_proteins_148.tsv&quot;        &quot;viral_proteins_149.tsv&quot;       
## [151] &quot;viral_proteins_150.tsv&quot;        &quot;viral_proteins_151.tsv&quot;       
## [153] &quot;viral_proteins_152.tsv&quot;        &quot;viral_proteins_153.tsv&quot;       
## [155] &quot;viral_proteins_154.tsv&quot;        &quot;viral_proteins_155.tsv&quot;       
## [157] &quot;viral_proteins_156.tsv&quot;        &quot;viral_proteins_157.tsv&quot;       
## [159] &quot;viral_proteins_158.tsv&quot;        &quot;viral_proteins_159.tsv&quot;       
## [161] &quot;viral_proteins_160.tsv&quot;        &quot;viral_proteins_161.tsv&quot;       
## [163] &quot;viral_proteins_162.tsv&quot;        &quot;viral_proteins_163.tsv&quot;       
## [165] &quot;viral_proteins_164.tsv&quot;        &quot;viral_proteins_165.tsv&quot;       
## [167] &quot;viral_proteins_166.tsv&quot;        &quot;viral_proteins_167.tsv&quot;       
## [169] &quot;viral_proteins_168.tsv&quot;        &quot;viral_proteins_169.tsv&quot;       
## [171] &quot;viral_proteins_170.tsv&quot;        &quot;viral_proteins_171.tsv&quot;       
## [173] &quot;viral_proteins_172.tsv&quot;        &quot;viral_proteins_173.tsv&quot;       
## [175] &quot;viral_proteins_174.tsv&quot;        &quot;viral_proteins_175.tsv&quot;       
## [177] &quot;viral_proteins_176.tsv&quot;        &quot;viral_proteins_177.tsv&quot;       
## [179] &quot;viral_proteins_178.tsv&quot;        &quot;viral_proteins_179.tsv&quot;       
## [181] &quot;viral_proteins_180.tsv&quot;        &quot;viral_proteins_181.tsv&quot;       
## [183] &quot;viral_proteins_182.tsv&quot;        &quot;viral_proteins_183.tsv&quot;       
## [185] &quot;viral_proteins_184.tsv&quot;        &quot;viral_proteins_185.tsv&quot;       
## [187] &quot;viral_proteins_186.tsv&quot;        &quot;viral_proteins_187.tsv&quot;       
## [189] &quot;viral_proteins_188.tsv&quot;        &quot;viral_proteins_189.tsv&quot;       
## [191] &quot;viral_proteins_190.tsv&quot;        &quot;viral_proteins_191.tsv&quot;       
## [193] &quot;viral_proteins_192.tsv&quot;        &quot;viral_proteins_193.tsv&quot;       
## [195] &quot;viral_proteins_194.tsv&quot;        &quot;viral_proteins_195.tsv&quot;       
## [197] &quot;viral_proteins_196.tsv&quot;        &quot;viral_proteins_197.tsv&quot;       
## [199] &quot;viral_proteins_198.tsv&quot;        &quot;viral_proteins_199.tsv&quot;       
## [201] &quot;viral_proteins_200.tsv&quot;        &quot;viral_proteins_201.tsv&quot;       
## [203] &quot;viral_proteins_202.tsv&quot;        &quot;viral_proteins_203.tsv&quot;       
## [205] &quot;viral_proteins_204.tsv&quot;        &quot;viral_proteins_205.tsv&quot;       
## [207] &quot;viral_proteins_206.tsv&quot;        &quot;viral_proteins_207.tsv&quot;       
## [209] &quot;viral_proteins_208.tsv&quot;        &quot;viral_proteins_209.tsv&quot;       
## [211] &quot;viral_proteins_210.tsv&quot;        &quot;viral_proteins_211.tsv&quot;       
## [213] &quot;viral_proteins_212.tsv&quot;        &quot;viral_proteins_213.tsv&quot;       
## [215] &quot;viral_proteins_214.tsv&quot;        &quot;viral_proteins_215.tsv&quot;       
## [217] &quot;viral_proteins_216.tsv&quot;        &quot;viral_proteins_217.tsv&quot;       
## [219] &quot;viral_proteins_218.tsv&quot;        &quot;viral_proteins_219.tsv&quot;       
## [221] &quot;viral_proteins_220.tsv&quot;        &quot;viral_proteins_221.tsv&quot;       
## [223] &quot;viral_proteins_222.tsv&quot;        &quot;viral_proteins_223.tsv&quot;       
## [225] &quot;viral_proteins_224.tsv&quot;        &quot;viral_proteins_225.tsv&quot;       
## [227] &quot;viral_proteins_226.tsv&quot;        &quot;viral_proteins_227.tsv&quot;       
## [229] &quot;viral_proteins_228.tsv&quot;        &quot;viral_proteins_229.tsv&quot;       
## [231] &quot;viral_proteins_230.tsv&quot;        &quot;viral_proteins_231.tsv&quot;       
## [233] &quot;viral_proteins_232.tsv&quot;        &quot;viral_proteins_233.tsv&quot;       
## [235] &quot;viral_proteins_234.tsv&quot;        &quot;viral_proteins_235.tsv&quot;       
## [237] &quot;viral_proteins_236.tsv&quot;        &quot;viral_proteins_237.tsv&quot;       
## [239] &quot;viral_proteins_238.tsv&quot;        &quot;viral_proteins_239.tsv&quot;       
## [241] &quot;viral_proteins_240.tsv&quot;        &quot;viral_proteins_241.tsv&quot;       
## [243] &quot;viral_proteins_242.tsv&quot;        &quot;viral_structural_proteins.tsv&quot;</code></pre>
<p>However, if I give you another dataset, then you
have to go in and copy and paste it, and change
the number.</p>
<p>What happens if I give you a proteome?
Here:
- <a href="data/viral_structural_proteins/viral_proteins_001.tsv">human protein sequence 1s</a></p>
<p>Doing lots of stuff - loops (Darach)</p>
<p>show list.files() - challenge is to analyze a bunch of ‚Ä¶.. ? protein seqs?</p>
<p>could evaluate the claim that four basic amino acids in a row is unusual for SARS2 (ever seen a NLS?)</p>
<p>Loops
How to think about a for loop</p>
<p>Specifically in context of processing multiple files, so list.files() ?</p>
<p>Students know that other control structures exist (do, while), and that they‚Äôre controlled by boolean logic</p>
<p>Apply is a thing</p>
<p>Scholars will be familiar with that folks have strong opinions about using apply instead of for loops</p>
<p>Scholars will understand that getting the code done is the most important thing, but that good use of apply can be something to develop later to make code run faster, cleaner</p>
<p>Scholars will be able to read what an example of apply or s/lapply is doing, so that they can read examples online</p>
<p>Scholars will have heard the term ‚Äúlambda function‚Äù ?</p>
<p>Scholars will understand that functions can be one-off (ie lambda, function(x){} ), and that‚Äôs okay</p>

</div>
<div id="writing-reusable-code" class="section level2">
<h2><span class="header-section-number">4.3</span> Writing (re)usable code</h2>
<!-- exercise -->
<p>Crack open your code - can you use it again?
Can you adapt it to modify your question, feed in new data,
and modify the scientifically-important bits easily?</p>
<p>Let‚Äôs look at two chunks of code from
<a href="https://github.com/sashaflevy/PPiSeq">a paper</a> (lightly edited).
The experiment is counting barcoded lineages of yeast cells to estimate
‚ÄúPPIs‚Äù (protein-protein interactions)<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>.
here‚Äôs an example of one style of writing R script:</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb163-1" title="1"><span class="co"># filter out bad barcode lineages ( &lt;= 2 time points counts &gt; 0, or maximum of each time point &lt;= 5 or total counts of a lineage &lt; 10)</span></a>
<a class="sourceLine" id="cb163-2" title="2">bad_index =<span class="st"> </span><span class="kw">rep</span>(<span class="dv">0</span>, <span class="kw">nrow</span>(DBC_known_counts))</a>
<a class="sourceLine" id="cb163-3" title="3"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(bad_index)){</a>
<a class="sourceLine" id="cb163-4" title="4">        counts =<span class="st"> </span><span class="kw">as.numeric</span>(DBC_known_counts[i, <span class="dv">4</span><span class="op">:</span><span class="dv">8</span>])</a>
<a class="sourceLine" id="cb163-5" title="5">        <span class="cf">if</span> (<span class="kw">length</span>(<span class="kw">which</span>(counts <span class="op">!=</span><span class="st"> </span><span class="dv">0</span>)) <span class="op">&lt;</span><span class="st"> </span><span class="dv">3</span> <span class="op">|</span><span class="st"> </span><span class="kw">max</span>(counts) <span class="op">&lt;</span><span class="st"> </span><span class="dv">5</span> <span class="op">|</span><span class="st"> </span><span class="kw">sum</span>(counts) <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>){</a>
<a class="sourceLine" id="cb163-6" title="6">                bad_index[i] =<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb163-7" title="7">        }</a>
<a class="sourceLine" id="cb163-8" title="8">}</a>
<a class="sourceLine" id="cb163-9" title="9"><span class="kw">length</span>(<span class="kw">which</span>(bad_index <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)) <span class="co"># 1447775</span></a></code></pre></div>
<!-- exercise -->
<ul>
<li>What is going on here?</li>
<li>How do you feed in new data?</li>
<li>How do you run this multiple times?</li>
<li>How do you change the logic?</li>
</ul>
<p>Here‚Äôs another example from the same author:</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb164-1" title="1">H202_Output &lt;-<span class="st"> </span><span class="kw">PPI_calling_sigmoid</span>(</a>
<a class="sourceLine" id="cb164-2" title="2">    <span class="dt">PPI_multiple=</span><span class="kw">dataFrameReader_T</span>(<span class="st">&quot;/Volumes/zmliu_02/PPiseq_03/H2O2/counts/PPI_multiple_p.values.csv&quot;</span>),</a>
<a class="sourceLine" id="cb164-3" title="3">    <span class="dt">specific_PPV=</span><span class="kw">c</span>(<span class="kw">seq</span>(<span class="fl">0.5</span>,<span class="fl">0.58</span>,<span class="dt">by=</span><span class="fl">0.02</span>),<span class="kw">seq</span>(<span class="fl">0.6</span>,<span class="fl">0.8</span>,<span class="dt">by=</span><span class="fl">0.01</span>),<span class="kw">seq</span>(<span class="fl">0.82</span>,<span class="fl">0.9</span>,<span class="dt">by=</span><span class="fl">0.02</span>)),</a>
<a class="sourceLine" id="cb164-4" title="4">    <span class="dt">Fitness=</span><span class="kw">fitness</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="fl">0.01</span>),</a>
<a class="sourceLine" id="cb164-5" title="5">    <span class="dt">p_value=</span><span class="kw">seq</span>(<span class="op">-</span><span class="dv">4</span>,<span class="dv">0</span>,<span class="fl">0.1</span>),</a>
<a class="sourceLine" id="cb164-6" title="6">    <span class="dt">Neg_number_PPI=</span><span class="fl">6e4</span>,</a>
<a class="sourceLine" id="cb164-7" title="7">    <span class="dt">Neg_ref_number=</span><span class="dv">50</span>, </a>
<a class="sourceLine" id="cb164-8" title="8">    <span class="dt">p_threshold=</span><span class="op">-</span><span class="dv">4</span></a>
<a class="sourceLine" id="cb164-9" title="9">    <span class="dt">p_loc=</span><span class="dv">6</span>, </a>
<a class="sourceLine" id="cb164-10" title="10">)</a></code></pre></div>
<!-- exercise -->
<p>Same questions.</p>
<div id="style-guides-can-be-inspiring" class="section level3">
<h3><span class="header-section-number">4.3.1</span> Style guides can be inspiring</h3>
<ul>
<li><a href="https://style.tidyverse.org/">tidyverse style guide</a></li>
<li><a href="https://google.github.io/styleguide/Rguide.html">google-specific changes</a></li>
<li><a href="https://jef.works/R-style-guide/">Jean Fan‚Äôs</a></li>
<li>search for ‚ÄúR style guide‚Äù</li>
</ul>
</div>
<div id="what-style-should-you-use" class="section level3">
<h3><span class="header-section-number">4.3.2</span> What style should you use?</h3>
<p>Be inconsistently consistent!
Balance for yourself:</p>
<ul>
<li>How easy is it to write?</li>
<li>How easy is it for you to read?</li>
<li>How easy is it for others to read?</li>
<li>How similar is it to what everyone else is doing (a very good thing)?</li>
</ul>
<p>But most importantly, use what folks around you are using.
Be lazy, imitate others.</p>
<!-- exercise -->
<ul>
<li>How would you describe your code writing style?</li>
<li>How do you name things?</li>
<li>How good are your comments?</li>
<li>What elements would you like to incorporate?</li>
</ul>

</div>
</div>
<div id="writing-modular-code" class="section level2">
<h2><span class="header-section-number">4.4</span> Writing modular code</h2>
<p>What is modularity of code?</p>
<p>Why?</p>
<p>think more clearly than ‚Äúhardcoding‚Äù stuff</p>
<p>change things more easily without forgetting everything</p>
<p>lets you operate at a higher level, by tweaking parameters in one place</p>
<!-- Exercise -->
<div id="calculating-standard-error" class="section level3">
<h3><span class="header-section-number">4.4.1</span> Calculating standard error</h3>
<p>Let‚Äôs calculate the standard error of a sample of values:</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb165-1" title="1">values &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">4</span>)</a>
<a class="sourceLine" id="cb165-2" title="2"><span class="kw">stderr</span>(values)</a></code></pre></div>
<pre><code>## Error in stderr(values): unused argument (values)</code></pre>
<p>Er ‚Ä¶ what? What is <code>stderr</code> doing?</p>
<p><code>?stderr</code></p>
<p>Write out the maths for the standard error of the mean</p>
<p>calcuate it</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb167-1" title="1"><span class="kw">sd</span>(values)<span class="op">/</span><span class="kw">sqrt</span>(<span class="kw">length</span>(values)<span class="op">-</span><span class="dv">1</span>)</a></code></pre></div>
<pre><code>## [1] 0.4727122</code></pre>
<p>write a function that does it</p>
<p>what do we save it as?</p>
<p>test it</p>
</div>
<div id="more-complex-modules" class="section level3">
<h3><span class="header-section-number">4.4.2</span> More complex modules</h3>
<p>More examples/exercise</p>
<p>show a simulation of something‚Ä¶. genetic drift of a virus replicating?</p>
<p>lineage G1312F</p>
<p>exercise - wrap the entire analysis as a function</p>
<p>talk about ease of calling</p>
<p>gotcha about print() the plots</p>
<p>exercise - make a parameter and argument</p>
<p>ease of tweaking this</p>
<p>exercise - break into subfunctions, generate and plot</p>
<p>ease of changing models</p>

</div>
</div>
<div id="packages-are-chunks-of-code-and-sometimes-data" class="section level2">
<h2><span class="header-section-number">4.5</span> Packages are chunks of code (and sometimes data)</h2>
<p>Let‚Äôs take a look at your code from the last few days. How would you share this with the other people in the course?</p>
<p>R, like other languages, is built on a package system - if you wrap up your code in particular expected ways and put it in particular expected places, it is very easy for others to get and use your code</p>
<p>side note link for interested students, easy of making pakcages (for advanced advanced)</p>
<div id="first-stop---cran" class="section level3">
<h3><span class="header-section-number">4.5.1</span> first stop - CRAN</h3>
<p><a href="">CRAN</a></p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb169-1" title="1"><span class="kw">library</span>(<span class="st">&quot;stringdist&quot;</span>)</a></code></pre></div>
<p>exercise - get the stringdist library, use it</p>
<p>exercise - get a new viz layer, use it</p>
</div>
<div id="how-does-this-package-work" class="section level3">
<h3><span class="header-section-number">4.5.2</span> How does this package work?</h3>
<p>?</p>
<p>??</p>
<p>etc</p>
</div>
<div id="next-stop---github" class="section level3">
<h3><span class="header-section-number">4.5.3</span> next stop - github</h3>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb170-1" title="1"><span class="kw">library</span>(<span class="st">&quot;devtools&quot;</span>)</a></code></pre></div>
<p>or <code>remotes</code>?</p>
<p>exercise - pull a package off github‚Ä¶ ? maybe some sort of viz again?</p>
<p>Exercise - install a package from github and learn how to use it</p>
<ul>
<li><a href="https://github.com/ewenme/ghibli">Ghibli color palette</a></li>
<li><a href="https://github.com/rossdrucker/sportyR">Sports field plotting</a></li>
<li><a href="https://github.com/wilkelab/ggridges">Ridgeplots in ggplot2</a></li>
</ul>
<!-- remotes::install_github("wilkelab/ggridges" -->
<p>problems with this - security, eh</p>
</div>
<div id="finally---bioconductor" class="section level3">
<h3><span class="header-section-number">4.5.4</span> finally - Bioconductor üò¨</h3>
<p><a href="">How to install Bioconductor</a></p>
<p>Scholars will know how to install Bioconductor package from CRAN</p>
<p>Scholars will know how to find and install packages from Bioconductor</p>
<p>explore the namespace for a package, ie ?packagename:: and TAB or ?packagename::</p>
<p>how to print out all the packages you have loaded</p>
</div>
</div>
<div id="finding-more-help-and-documentation" class="section level2">
<h2><span class="header-section-number">4.6</span> Finding more help and documentation</h2>
<p>Need a problem</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb171-1" title="1">?geom_line</a></code></pre></div>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb172-1" title="1">?stringdist</a></code></pre></div>
<p>Objective X.X: Scholars will know how to get official docs ( ? ) and how to skim/read these</p>
<p>Objective X.X: Scholars will see how easy it is to use a search engine to try and find other answers</p>
<p>Objective X.X: Scholars will understand the intention of the Slack being a learning community, or something (set expectations about this)</p>
<p>Source up problems from the class?</p>
<p>Demo a weird plot idea, search for how to do it on stack overflow?</p>
<p>Maybe how to change the color of facet labels in a ggplot facet graph, that‚Äôs a bit tricky and demonstrates why base R is important‚Ä¶</p>
</div>
<div id="reproducibility-and-sharing" class="section level2">
<h2><span class="header-section-number">4.7</span> Reproducibility and sharing</h2>
<p>think about this</p>
<p>think about the next person coming along, or yourself in 3 months</p>
<p>links on syllabus for more info</p>
<p>all sorts of automated stuff you can do</p>

</div>
<div id="reproducibile-sharing---more-rmarkdown-and" class="section level2">
<h2><span class="header-section-number">4.8</span> Reproducibile sharing - more <code>rmarkdown</code> and</h2>
<p>How are you saving your notes for this class?
<!-- rmd you better be... --></p>
<p>How do you usually save notes/code/instructions?</p>
<p>How do you share this with others?</p>
<div id="rmarkdown-package" class="section level3 tabset">
<h3><span class="header-section-number">4.8.1</span> rmarkdown package</h3>
<div id="background" class="section level4">
<h4><span class="header-section-number">4.8.1.1</span> Background</h4>
<p>The <code>rmarkdown</code> package was created by
<a href="https://www.rstudio.com/speakers/yihui-xie/">Yihui Xie</a>,
extending from previous work and ideas in
<code>knitr</code> and <code>sweave</code>.</p>
<p>It‚Äôs a way of mixing writing with code, such that
you can run the code and it makes a pretty doc
(and <a href="https://rmarkdown.rstudio.com/gallery.html">more</a>).</p>
<p>video1 overview
<!-- 
motivation / ie what it do
video1 background / broad context
yihui xie - grad student, wrote a bunch of packages, now works at Rstudio (pattern here‚Ä¶)
sweave -> knitr -> rmarkdown
how I‚Äôve used it, how you could use it
--></p>
</div>
<div id="chunk-options" class="section level4">
<h4><span class="header-section-number">4.8.1.2</span> Chunk options</h4>
<p>You can set chunk-level options in an Rmd, for
each code chunk. Such as:</p>
<pre><code>```{r, name_of_chunk, cache=T, fig.width=3, fig.height=2, error=F, warning=F, fig.align=&quot;right&quot;}
x &lt;- 1:10
y &lt;- 1:10
plot(x,y)
```</code></pre>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb174-1" title="1">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb174-2" title="2">y &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb174-3" title="3"><span class="kw">plot</span>(x,y)</a></code></pre></div>
<p><img src="560-rmarkdown-and-repro_files/figure-html/name_of_chunk-1.png" width="288" style="display: block; margin: auto 0 auto auto;" /></p>
<p>It is possible to enable figure captions.</p>
<p>video2 chunk options
<!--
how to cache=T
how to hide warnings/errors
how to change figure sizes
fig.align=‚Äùright‚Äù
--></p>
</div>
<div id="document-options" class="section level4">
<h4><span class="header-section-number">4.8.1.3</span> Document options</h4>
<p>You can set document-level options to. To do this,
you create what‚Äôs called a
<a href="yaml.org">YAML</a> header, like so:</p>
<pre><code>---
title: &quot;Titled&quot;
author: &quot;yours&quot;
---</code></pre>
<p>You need three hyphens to open and close it.
Put it at the very beginning. You can define
quite a few options, including <em>themes</em>,
like so:</p>
<pre><code>---
title: &quot;Titled&quot;
author: &quot;yours&quot;

---</code></pre>
<p>video3 head options
<!--title
authors
date, Sys.date
format ‚Ä¶. slides !
*** themes **** &&%
--></p>
</div>
<div id="how-it-works-sort-of" class="section level4">
<h4><span class="header-section-number">4.8.1.4</span> How it works, sort of‚Ä¶</h4>
<p>video4 how it does what it‚Äôs doing
<!--what it‚Äôs doing behind the scenes - a diagram ( on paper )
code gets pulled out and run, top to bottom
--></p>
<p><code>rmarkdown</code> parses an Rmd file to extract out
the R code. It runs this, using the chunk and
other options to control this, then makes outputs
from different chunks (text and plots).
It then sticks the text and images into a
<code>markdown</code> document, and uses a program called
<code>pandoc</code> (included inside Rstudio) to turn that
into HTML, PDF, and/or slides.</p>
</div>
</div>
<div id="section" class="section level3 unnumbered">
<h3></h3>
</div>
<div id="sharing-with-others" class="section level3">
<h3><span class="header-section-number">4.8.2</span> Sharing with others</h3>
<p>What does someone need to re-run your analyses?</p>
<!-- R, Rstudio, packages, scripts -->
<ul>
<li>R (often Rstudio)</li>
<li>what packages you‚Äôre using</li>
<li></li>
</ul>
<p>why the hell we want others to use our code?
Well I‚Äôll tell you why - the general intellect</p>
<p>think about this</p>
<p>think about the next person coming along, or yourself in 3 months</p>
<p>links on syllabus for more info</p>
<p>all sorts of automated stuff you can do</p>

</div>
</div>
<div id="troubleshooting-getting-help-dissecting-problems" class="section level2">
<h2><span class="header-section-number">4.9</span> Troubleshooting, getting help, dissecting problems</h2>
<p>You will have problems.</p>
<p>How do you (1) get past these and (2) learn from them?</p>
<p>What kinds of errors did we encounter in this class?</p>
<p>How do we deal with these?</p>
<div id="places-to-look-for-help" class="section level3">
<h3><span class="header-section-number">4.9.1</span> Places to look for help</h3>
<ul>
<li>yourself - past notes, troubleshoot logically</li>
<li>the people around you, research mentors</li>
<li>Slack channel</li>
<li>github/gitlab ‚ÄúIssues‚Äù page - search first the closed issues!!!</li>
<li>StackOverflow - search first for similar problems!!!</li>
<li>twitter (for fun problems)</li>
</ul>
<p>It helps to have a‚Ä¶</p>
</div>
<div id="minimum-reproducible-example" class="section level3">
<h3><span class="header-section-number">4.9.2</span> Minimum reproducible example</h3>
<p>video1
<!--
show an error, simplify it by making MRE
--></p>
<p>If you can‚Äôt find an easy answer, it is important to begin to approach the
problem like you would a science problem.</p>
<p>Reduce the problem, eliminate extraneous variables.</p>
<p>Use or capture intermediate steps to identify where the issue is.</p>
<p>Collect <code>sessionInfo()</code> and share it with folks.</p>
<!-- maybe not....
### Exercise - debug one of the following Rmds
-->

</div>
</div>
<div id="conclusion-other-concepts" class="section level2">
<h2><span class="header-section-number">4.10</span> Conclusion, other concepts</h2>
<p>Today we covered:</p>
<ul>
<li>loops to repeat code</li>
<li>aspects of nice (re)usable code</li>
<li>writing code modularly with functions</li>
<li>finding and using packages</li>
<li>writing an Rmarkdown report</li>
<li>finding help and tackling a complex problem</li>
</ul>
<p>We hope you are better oriented and prepared to
repeat your analyses to build a complete story,
reproduce these larger analyses workflows,
extend from your work to do more complicated
workflows,
and share your analyses with others in a
well-organized but complete way.</p>
<p>You can extend on these ideas. Here‚Äôs a couple of
areas that might be useful:</p>
<dl>
<dt>Workflow / pipeline tools</dt>
<dd><p>These are automation tools to smartly run
different chunks of analyses. This is really
handy when parts of your workflow take a
long time, and you usually don‚Äôt want to be<br />
re-running those, but you do want it to be
able to run the whole thing automatically.</p>
<p>You can use old-school shell-like tools such
as ‚Äú<a href="https://makefiletutorial.com/">Make/Makefiles</a>‚Äù,
newfangled but complex tools
like ‚ÄúNextflow‚Äù
or ‚Äúsnakemake‚Äù,
or R-specific tooks like
‚Äú<a href="https://books.ropensci.org/targets/walkthrough.html">targets</a>‚Äù.</p>
</dd>
</dl>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="3">
<li id="fn3"><p>Ask Darach if you want details, or
<a href="doi.org/10.7554/eLife.62365">read the paper</a>.<a href="day-5-building-workflows.html#fnref3" class="footnote-back">‚Ü©</a></p></li>
</ol>
</div>
<p style="margin-top:10em;text-align:center;font-size:small;">
    <a href="https://github.com/darachm/dll-r/blob/main/LICENSE.md">
        Licensed Creative Commons Attribution-NonCommercial-ShareAlike 4.0
    </a>
</p>
<p style="text-align:center;font-size:small;">
    <a href="https://github.com/rstudio/bookdown" target="blank">
        Website typeset with bookdown
    </a>
</p>
            </section>

          </div>
        </div>
      </div>
<a href="day-4-tidyverse-and-plots-and-such.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="appendix.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/darachm/dll-r/edit/main/500-day5-intro.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["DLL 2021 R syllabus site.html"],
"toc": {
"collapse": "subsection"
},
"highlight": "zenburn"
});
});
</script>

</body>

</html>
