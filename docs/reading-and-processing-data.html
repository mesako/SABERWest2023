<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2.1 Reading and processing data | DLL 2021, R section</title>
  <meta name="description" content="A living syllabus for the R section of DLL 2021, at Stanford" />
  <meta name="generator" content="bookdown 0.31 and GitBook 2.6.7" />

  <meta property="og:title" content="2.1 Reading and processing data | DLL 2021, R section" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="A living syllabus for the R section of DLL 2021, at Stanford" />
  <meta name="github-repo" content="darachm/dll-r" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2.1 Reading and processing data | DLL 2021, R section" />
  
  <meta name="twitter:description" content="A living syllabus for the R section of DLL 2021, at Stanford" />
  

<meta name="author" content="mesako" />
<meta name="author" content="Margaret" />
<meta name="author" content="Samson" />
<meta name="author" content="Zac" />
<meta name="author" content="darachm" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="day-4---tidyverse-and-visualizations.html"/>
<link rel="next" href="tidyverse-12-functions-pipes.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">DLL 2021 R workshops</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Workshop Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="workshop-goals.html"><a href="workshop-goals.html"><i class="fa fa-check"></i><b>1.1</b> Workshop goals</a></li>
<li class="chapter" data-level="1.2" data-path="structure-and-resources.html"><a href="structure-and-resources.html"><i class="fa fa-check"></i><b>1.2</b> Structure and resources</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="structure-and-resources.html"><a href="structure-and-resources.html#workshop-schedule"><i class="fa fa-check"></i><b>1.2.1</b> Workshop schedule</a></li>
<li class="chapter" data-level="1.2.2" data-path="structure-and-resources.html"><a href="structure-and-resources.html#asynchronous-sessions"><i class="fa fa-check"></i><b>1.2.2</b> Asynchronous sessions</a></li>
<li class="chapter" data-level="1.2.3" data-path="structure-and-resources.html"><a href="structure-and-resources.html#synchronous-sessions"><i class="fa fa-check"></i><b>1.2.3</b> Synchronous sessions</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="workshop-expectations.html"><a href="workshop-expectations.html"><i class="fa fa-check"></i><b>1.3</b> Workshop expectations</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="day-4---tidyverse-and-visualizations.html"><a href="day-4---tidyverse-and-visualizations.html"><i class="fa fa-check"></i><b>2</b> Day 4 - tidyverse and visualizations</a>
<ul>
<li class="chapter" data-level="2.1" data-path="reading-and-processing-data.html"><a href="reading-and-processing-data.html"><i class="fa fa-check"></i><b>2.1</b> Reading and processing data</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="reading-and-processing-data.html"><a href="reading-and-processing-data.html#loading-a-file-into-r"><i class="fa fa-check"></i><b>2.1.1</b> Loading a file into R</a></li>
<li class="chapter" data-level="2.1.2" data-path="reading-and-processing-data.html"><a href="reading-and-processing-data.html#handling-issues-in-data"><i class="fa fa-check"></i><b>2.1.2</b> Handling issues in data</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="tidyverse-12-functions-pipes.html"><a href="tidyverse-12-functions-pipes.html"><i class="fa fa-check"></i><b>2.2</b> Tidyverse 1/2: functions &amp; pipes</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="tidyverse-12-functions-pipes.html"><a href="tidyverse-12-functions-pipes.html#welcome-to-the-tidyverse"><i class="fa fa-check"></i><b>2.2.1</b> Welcome to the tidyverse!</a></li>
<li class="chapter" data-level="2.2.2" data-path="tidyverse-12-functions-pipes.html"><a href="tidyverse-12-functions-pipes.html#load-tidyverse"><i class="fa fa-check"></i><b>2.2.2</b> Load tidyverse</a></li>
<li class="chapter" data-level="2.2.3" data-path="tidyverse-12-functions-pipes.html"><a href="tidyverse-12-functions-pipes.html#how-to-pipe"><i class="fa fa-check"></i><b>2.2.3</b> How to pipe %&gt;%</a></li>
<li class="chapter" data-level="2.2.4" data-path="tidyverse-12-functions-pipes.html"><a href="tidyverse-12-functions-pipes.html#essential-tidyverse-functions"><i class="fa fa-check"></i><b>2.2.4</b> Essential tidyverse functions</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="tidyverse-22-reshaping-data.html"><a href="tidyverse-22-reshaping-data.html"><i class="fa fa-check"></i><b>2.3</b> Tidyverse 2/2: reshaping data</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="tidyverse-22-reshaping-data.html"><a href="tidyverse-22-reshaping-data.html#why-tidy-data"><i class="fa fa-check"></i><b>2.3.1</b> Why tidy data</a></li>
<li class="chapter" data-level="2.3.2" data-path="tidyverse-22-reshaping-data.html"><a href="tidyverse-22-reshaping-data.html#how-to-tidy-data"><i class="fa fa-check"></i><b>2.3.2</b> How to tidy data</a></li>
<li class="chapter" data-level="2.3.3" data-path="tidyverse-22-reshaping-data.html"><a href="tidyverse-22-reshaping-data.html#data-exploration-with-tidyverse"><i class="fa fa-check"></i><b>2.3.3</b> Data exploration with tidyverse</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="making-plots-with-ggplot2.html"><a href="making-plots-with-ggplot2.html"><i class="fa fa-check"></i><b>2.4</b> Making plots with ggplot2</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="making-plots-with-ggplot2.html"><a href="making-plots-with-ggplot2.html#getting-started-with-a-ggplot"><i class="fa fa-check"></i><b>2.4.1</b> Getting started with a ggplot</a></li>
<li class="chapter" data-level="2.4.2" data-path="making-plots-with-ggplot2.html"><a href="making-plots-with-ggplot2.html#changing-plot-aesthetics"><i class="fa fa-check"></i><b>2.4.2</b> Changing plot aesthetics</a></li>
<li class="chapter" data-level="2.4.3" data-path="making-plots-with-ggplot2.html"><a href="making-plots-with-ggplot2.html#exploring-simple-plots"><i class="fa fa-check"></i><b>2.4.3</b> Exploring simple plots</a></li>
<li class="chapter" data-level="2.4.4" data-path="making-plots-with-ggplot2.html"><a href="making-plots-with-ggplot2.html#visualizing-between-groups"><i class="fa fa-check"></i><b>2.4.4</b> Visualizing between groups</a></li>
<li class="chapter" data-level="2.4.5" data-path="making-plots-with-ggplot2.html"><a href="making-plots-with-ggplot2.html#generating-heatmaps-optional"><i class="fa fa-check"></i><b>2.4.5</b> Generating heatmaps (OPTIONAL)</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="making-scientific-figures.html"><a href="making-scientific-figures.html"><i class="fa fa-check"></i><b>2.5</b> Making scientific figures</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="making-scientific-figures.html"><a href="making-scientific-figures.html#plotting-error-bars"><i class="fa fa-check"></i><b>2.5.1</b> Plotting error bars</a></li>
<li class="chapter" data-level="2.5.2" data-path="making-scientific-figures.html"><a href="making-scientific-figures.html#showing-trends-in-data"><i class="fa fa-check"></i><b>2.5.2</b> Showing trends in data</a></li>
<li class="chapter" data-level="2.5.3" data-path="making-scientific-figures.html"><a href="making-scientific-figures.html#saving-figures-locally"><i class="fa fa-check"></i><b>2.5.3</b> Saving figures locally</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="applying-basic-stats.html"><a href="applying-basic-stats.html"><i class="fa fa-check"></i><b>2.6</b> Applying basic stats</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="applying-basic-stats.html"><a href="applying-basic-stats.html#describing-quantitative-variables"><i class="fa fa-check"></i><b>2.6.1</b> Describing quantitative variables</a></li>
<li class="chapter" data-level="2.6.2" data-path="applying-basic-stats.html"><a href="applying-basic-stats.html#finding-differences-in-data"><i class="fa fa-check"></i><b>2.6.2</b> Finding differences in data</a></li>
<li class="chapter" data-level="2.6.3" data-path="applying-basic-stats.html"><a href="applying-basic-stats.html#identifying-correlations"><i class="fa fa-check"></i><b>2.6.3</b> Identifying correlations</a></li>
<li class="chapter" data-level="2.6.4" data-path="applying-basic-stats.html"><a href="applying-basic-stats.html#producing-linear-models"><i class="fa fa-check"></i><b>2.6.4</b> Producing linear models</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>3</b> Appendix</a>
<ul>
<li class="chapter" data-level="3.1" data-path="some-links-and-some-extras.html"><a href="some-links-and-some-extras.html"><i class="fa fa-check"></i><b>3.1</b> Some links and some extras</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="some-links-and-some-extras.html"><a href="some-links-and-some-extras.html#ideas-for-figures"><i class="fa fa-check"></i><b>3.1.1</b> Ideas for figures</a></li>
<li class="chapter" data-level="3.1.2" data-path="some-links-and-some-extras.html"><a href="some-links-and-some-extras.html#more-links"><i class="fa fa-check"></i><b>3.1.2</b> More links</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">DLL 2021, R section</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="reading-and-processing-data" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Reading and processing data<a href="reading-and-processing-data.html#reading-and-processing-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>So far, we have largely used data that was already provided to us in base R or through the <code>tidyverse</code> packages. In reality, you will be working with data that comes from a file containing measurements collected by a researcher.</p>
<div id="loading-a-file-into-r" class="section level3 hasAnchor" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> Loading a file into R<a href="reading-and-processing-data.html#loading-a-file-into-r" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are multiple file types that can be read into R. The most common one is the csv file extension, though txt files also work. You can read in Excel files using additional packages such as the <code>readxl</code> library.</p>
<p>Let’s practice reading in data using the <code>read.csv</code> function.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="reading-and-processing-data.html#cb1-1" aria-hidden="true" tabindex="-1"></a>?read.csv</span></code></pre></div>
<p>The repository for this site has a folder called <code>data</code> that contains a file called <code>iris.csv</code>, which is simply the original <code>iris</code> dataset with some modifications. We read in this data and save it to a variable named <code>irisz</code> (worksheet task 3.1.1A).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="reading-and-processing-data.html#cb2-1" aria-hidden="true" tabindex="-1"></a>irisz <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/iris.csv&quot;</span>)</span>
<span id="cb2-2"><a href="reading-and-processing-data.html#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(irisz)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species Location
## 1          5.1         3.5          1.4         0.2  setosa    Korea
## 2          4.9           3          1.4         0.2  setosa    China
## 3          4.7         3.2          1.3         0.2  setosa    Korea
## 4          4.6         3.1          1.5         0.2  setosa    China
## 5            5         3.6          1.4         0.2  setosa    China
## 6          5.4                      1.7         0.4  setosa   Canada</code></pre>
<p>You can already see there are some differences compared to the original <code>iris</code> dataset, such as missing data and an additional column of information. You can see there is also a difference in how certain columns are handled.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="reading-and-processing-data.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris<span class="sc">$</span>Species)</span></code></pre></div>
<pre><code>## [1] setosa setosa setosa setosa setosa setosa
## Levels: setosa versicolor virginica</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="reading-and-processing-data.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(irisz<span class="sc">$</span>Species)</span></code></pre></div>
<pre><code>## [1] &quot;setosa&quot; &quot;setosa&quot; &quot;setosa&quot; &quot;setosa&quot; &quot;setosa&quot; &quot;setosa&quot;</code></pre>
<p>For example, here it is clear that our data we read from a csv file is not treating species as categorical information. We can toggle a setting called <code>stringsAsFactors</code> that will turn these character string inputs into factors when the file is loaded into R.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="reading-and-processing-data.html#cb8-1" aria-hidden="true" tabindex="-1"></a>irisz <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/iris.csv&quot;</span>, <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>)</span>
<span id="cb8-2"><a href="reading-and-processing-data.html#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(irisz<span class="sc">$</span>Species)</span></code></pre></div>
<pre><code>## [1] setosa setosa setosa setosa setosa setosa
## Levels:  setosa versicolor virginica</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="reading-and-processing-data.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(irisz<span class="sc">$</span>Location)</span></code></pre></div>
<pre><code>## [1] Korea  China  Korea  China  China  Canada
## Levels:  Canada China Japan Korea Russia USA</code></pre>
<p>If we did not want to reload our data from a file, we can also transform columns (i.e. vectors) in our dataframe to be different types. For example, we could use <code>irisz$Species &lt;- as.factor(irisz$Species)</code> to turn it into a factor after it has already been loaded. There are similar functions like <code>as.numeric</code>, <code>as.character</code>, and <code>as.logical</code> that you may use to transform data types. Be aware though that certain conversions may lead to issues and loss of data!</p>
<p>Now both of these columns are being treated as categorical data. There are other settings we can change, such as providing different names for the columns (worksheet task 3.1.1B).</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="reading-and-processing-data.html#cb12-1" aria-hidden="true" tabindex="-1"></a>irisz <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/iris.csv&quot;</span>, <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">&quot;sep_len&quot;</span>, <span class="st">&quot;sep_wid&quot;</span>, <span class="st">&quot;pet_len&quot;</span>, <span class="st">&quot;pet_wid&quot;</span>, <span class="st">&quot;species&quot;</span>, <span class="st">&quot;loc&quot;</span>))</span>
<span id="cb12-2"><a href="reading-and-processing-data.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(irisz)</span></code></pre></div>
<pre><code>##   sep_len sep_wid pet_len pet_wid species    loc
## 1     5.1     3.5     1.4     0.2  setosa  Korea
## 2     4.9       3     1.4     0.2  setosa  China
## 3     4.7     3.2     1.3     0.2  setosa  Korea
## 4     4.6     3.1     1.5     0.2  setosa  China
## 5       5     3.6     1.4     0.2  setosa  China
## 6     5.4             1.7     0.4  setosa Canada</code></pre>
</div>
<div id="handling-issues-in-data" class="section level3 hasAnchor" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> Handling issues in data<a href="reading-and-processing-data.html#handling-issues-in-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now that we have loaded in the data, we should preview it and look for any possible issues. You never know what can go wrong in the data pipeline: data can be recorded incorrectly or corrupted at any point in the process.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="reading-and-processing-data.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(irisz)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    150 obs. of  6 variables:
##  $ sep_len: chr  &quot;5.1&quot; &quot;4.9&quot; &quot;4.7&quot; &quot;4.6&quot; ...
##  $ sep_wid: chr  &quot;3.5&quot; &quot;3&quot; &quot;3.2&quot; &quot;3.1&quot; ...
##  $ pet_len: chr  &quot;1.4&quot; &quot;1.4&quot; &quot;1.3&quot; &quot;1.5&quot; ...
##  $ pet_wid: chr  &quot;0.2&quot; &quot;0.2&quot; &quot;0.2&quot; &quot;0.2&quot; ...
##  $ species: chr  &quot;setosa&quot; &quot;setosa&quot; &quot;setosa&quot; &quot;setosa&quot; ...
##  $ loc    : chr  &quot;Korea&quot; &quot;China&quot; &quot;Korea&quot; &quot;China&quot; ...</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="reading-and-processing-data.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(irisz)</span></code></pre></div>
<pre><code>##    sep_len            sep_wid            pet_len            pet_wid         
##  Length:150         Length:150         Length:150         Length:150        
##  Class :character   Class :character   Class :character   Class :character  
##  Mode  :character   Mode  :character   Mode  :character   Mode  :character  
##    species              loc           
##  Length:150         Length:150        
##  Class :character   Class :character  
##  Mode  :character   Mode  :character</code></pre>
<p>One immediate issue you can spot here is that all variables are being treated as character strings. We would expect that sepal length/width and petal length/width would be numeric variables. To inspect what might be happening, we can look at the unique elements in one of these columns using the <code>unique</code> function.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="reading-and-processing-data.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(irisz<span class="sc">$</span>sep_len)</span></code></pre></div>
<pre><code>##  [1] &quot;5.1&quot; &quot;4.9&quot; &quot;4.7&quot; &quot;4.6&quot; &quot;5&quot;   &quot;5.4&quot; &quot;4.4&quot; &quot;4.8&quot; &quot;4.3&quot; &quot;5.8&quot; &quot;5.7&quot; &quot;5.2&quot;
## [13] &quot;5.5&quot; &quot;4.5&quot; &quot;n/a&quot; &quot;5.3&quot; &quot;7&quot;   &quot;6.4&quot; &quot;6.9&quot; &quot;6.5&quot; &quot;6.3&quot; &quot;6.6&quot; &quot;5.9&quot; &quot;6&quot;  
## [25] &quot;6.1&quot; &quot;5.6&quot; &quot;6.7&quot; &quot;6.2&quot; &quot;6.8&quot; &quot;7.1&quot; &quot;7.6&quot; &quot; &quot;   &quot;7.2&quot; &quot;7.7&quot; &quot;7.4&quot; &quot;7.9&quot;</code></pre>
<p>Looking at this, we can find the culprit for why these values are treated as a string. There are some entries that are simply a blank space <code>""</code> and there are missing data encoded as <code>"n/a"</code> in this dataset.</p>
<p>The <code>read.csv</code> function has a nice way to deal with this, specifically the argument <code>na.strings</code> that takes options for elements that might be present in the loaded data that should be treated as an <code>NA</code> (worksheet tasks 3.1.2A through worksheet task 3.1.2D).</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="reading-and-processing-data.html#cb20-1" aria-hidden="true" tabindex="-1"></a>irisz <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/iris.csv&quot;</span>, <span class="at">na.strings =</span> <span class="fu">c</span>(<span class="st">&quot;&quot;</span>, <span class="st">&quot;n/a&quot;</span>), <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>)</span>
<span id="cb20-2"><a href="reading-and-processing-data.html#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(irisz)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    150 obs. of  6 variables:
##  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##  $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 NA 3.4 3.4 2.9 3.1 ...
##  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
##  $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
##  $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 NA 1 1 ...
##  $ Location    : Factor w/ 6 levels &quot;Canada&quot;,&quot;China&quot;,..: 4 2 4 2 2 1 2 2 5 3 ...</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="reading-and-processing-data.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(irisz)</span></code></pre></div>
<pre><code>##   Sepal.Length    Sepal.Width     Petal.Length    Petal.Width    
##  Min.   :4.300   Min.   :0.350   Min.   :1.000   Min.   : 0.100  
##  1st Qu.:5.100   1st Qu.:2.800   1st Qu.:1.550   1st Qu.: 0.300  
##  Median :5.800   Median :3.000   Median :4.300   Median : 1.300  
##  Mean   :5.839   Mean   :3.028   Mean   :3.752   Mean   : 1.331  
##  3rd Qu.:6.400   3rd Qu.:3.300   3rd Qu.:5.100   3rd Qu.: 1.800  
##  Max.   :7.900   Max.   :4.400   Max.   :6.900   Max.   :23.000  
##  NA&#39;s   :2       NA&#39;s   :3       NA&#39;s   :3       NA&#39;s   :2       
##        Species     Location 
##  setosa    :49   Canada:35  
##  versicolor:50   China : 6  
##  virginica :49   Japan :11  
##  NA&#39;s      : 2   Korea :10  
##                  Russia:11  
##                  USA   :63  
##                  NA&#39;s  :14</code></pre>
<p>Now we can see that the first columns are being properly treated as numeric vectors.</p>
<p>Our next step would be to double-check our data for anything that looks anamolous. Let’s first take a look at the distributions of our numerical data using the base R <code>hist</code> function, which plots a simple histogram (worksheet task 3.1.2E).</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="reading-and-processing-data.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(irisz<span class="sc">$</span>Sepal.Length)</span></code></pre></div>
<p><img src="410-process-data_files/figure-html/irisz_hist_sepal-1.png" width="672" /></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="reading-and-processing-data.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(irisz<span class="sc">$</span>Sepal.Width)</span></code></pre></div>
<p><img src="410-process-data_files/figure-html/irisz_hist_sepal-2.png" width="672" /></p>
<p>From these figures, we can spot that there is one very low value for sepal width that we may want to investigate.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="reading-and-processing-data.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(irisz<span class="sc">$</span>Petal.Length)</span></code></pre></div>
<p><img src="410-process-data_files/figure-html/irisz_hist-1.png" width="672" /></p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="reading-and-processing-data.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(irisz<span class="sc">$</span>Petal.Width)</span></code></pre></div>
<p><img src="410-process-data_files/figure-html/irisz_hist-2.png" width="672" /></p>
<p>From these figures, we see there is a very high value for petal width that we may want to investigate.</p>
<p>It is possible that these values somehow got changed or corrupted during the recording process. We can filter out these anomalous pieces of data using conditional logic that we learned about when indexing and subsetting into a vector. Let’s start by filtering out rows that have a petal width more than 5.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="reading-and-processing-data.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(irisz)</span></code></pre></div>
<pre><code>## [1] 150   6</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="reading-and-processing-data.html#cb30-1" aria-hidden="true" tabindex="-1"></a>irisz <span class="ot">&lt;-</span> irisz[irisz<span class="sc">$</span>Petal.Width <span class="sc">&lt;</span> <span class="dv">5</span>, ]</span>
<span id="cb30-2"><a href="reading-and-processing-data.html#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(irisz)</span></code></pre></div>
<pre><code>## [1] 149   6</code></pre>
<p>Note that we used the statement <code>irisz$Petal.Width &lt; 5</code> that evaluates as <code>TRUE</code> or <code>FALSE</code> for every row. We then indexed into the <code>irisz</code> dataframe using brackets <code>[]</code> and selected all rows that evaluate as <code>TRUE</code>. This led to one row being removed. We can repeat this with the anamolous value for sepal width (worksheet task 3.1.2F).</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="reading-and-processing-data.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(irisz)</span></code></pre></div>
<pre><code>## [1] 149   6</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="reading-and-processing-data.html#cb34-1" aria-hidden="true" tabindex="-1"></a>irisz <span class="ot">&lt;-</span> irisz[irisz<span class="sc">$</span>Sepal.Width <span class="sc">&gt;</span> <span class="dv">1</span>, ]</span>
<span id="cb34-2"><a href="reading-and-processing-data.html#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(irisz)</span></code></pre></div>
<pre><code>## [1] 148   6</code></pre>
<p>Now that we have removed observations that looked strange by eye inspection, we may have only some final pre-processing steps to do.</p>
<p>Depending on what downstream analysis we want to conduct, we may want to standardize or normalize our numeric values. R comes with an existing <code>scale</code> function that we can use to standardize between values with different ranges and orders of magnitude.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="reading-and-processing-data.html#cb36-1" aria-hidden="true" tabindex="-1"></a>?scale</span></code></pre></div>
<p>The <code>scale</code> function will by default scale and center a numeric vector, but you can choose to do only one of these steps using argument settings.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="reading-and-processing-data.html#cb37-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb37-2"><a href="reading-and-processing-data.html#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">scale</span>(x)</span></code></pre></div>
<pre><code>##             [,1]
##  [1,] -1.4863011
##  [2,] -1.1560120
##  [3,] -0.8257228
##  [4,] -0.4954337
##  [5,] -0.1651446
##  [6,]  0.1651446
##  [7,]  0.4954337
##  [8,]  0.8257228
##  [9,]  1.1560120
## [10,]  1.4863011
## attr(,&quot;scaled:center&quot;)
## [1] 5.5
## attr(,&quot;scaled:scale&quot;)
## [1] 3.02765</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="reading-and-processing-data.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">scale</span>(x, <span class="at">center =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>##            [,1]
##  [1,] 0.1528942
##  [2,] 0.3057883
##  [3,] 0.4586825
##  [4,] 0.6115766
##  [5,] 0.7644708
##  [6,] 0.9173649
##  [7,] 1.0702591
##  [8,] 1.2231533
##  [9,] 1.3760474
## [10,] 1.5289416
## attr(,&quot;scaled:scale&quot;)
## [1] 6.540472</code></pre>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="reading-and-processing-data.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">scale</span>(x, <span class="at">scale =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>##       [,1]
##  [1,] -4.5
##  [2,] -3.5
##  [3,] -2.5
##  [4,] -1.5
##  [5,] -0.5
##  [6,]  0.5
##  [7,]  1.5
##  [8,]  2.5
##  [9,]  3.5
## [10,]  4.5
## attr(,&quot;scaled:center&quot;)
## [1] 5.5</code></pre>
<p>We can scale the columns in our dataset and create a more standardized range of values for each column.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="reading-and-processing-data.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># before scaling</span></span>
<span id="cb43-2"><a href="reading-and-processing-data.html#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(irisz<span class="sc">$</span>Sepal.Length)</span></code></pre></div>
<p><img src="410-process-data_files/figure-html/before_after_scale-1.png" width="672" /></p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="reading-and-processing-data.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(irisz<span class="sc">$</span>Petal.Width)</span></code></pre></div>
<p><img src="410-process-data_files/figure-html/before_after_scale-2.png" width="672" /></p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="reading-and-processing-data.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># after scaling</span></span>
<span id="cb45-2"><a href="reading-and-processing-data.html#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(<span class="fu">scale</span>(irisz<span class="sc">$</span>Sepal.Length))</span></code></pre></div>
<p><img src="410-process-data_files/figure-html/before_after_scale-3.png" width="672" /></p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="reading-and-processing-data.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(<span class="fu">scale</span>(irisz<span class="sc">$</span>Petal.Width))</span></code></pre></div>
<p><img src="410-process-data_files/figure-html/before_after_scale-4.png" width="672" /></p>
<p>The shapes of our distributions for these measurements is not fundamentally different, but if you look along the x-axis, you will notice that the values (especially the highest and lowest) are more similar between these two columns after they are both scaled.</p>
<p>You may also consider rescaling values or normalizing them to all be between 0 and 1. There is a function for this called <code>rescale</code> that comes with the <code>scales</code> library.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="reading-and-processing-data.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb47-2"><a href="reading-and-processing-data.html#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rescale</span>(x)        </span></code></pre></div>
<pre><code>##  [1] 0.0000000 0.1111111 0.2222222 0.3333333 0.4444444 0.5555556 0.6666667
##  [8] 0.7777778 0.8888889 1.0000000</code></pre>

</div>
</div>
<p style="margin-top:10em;text-align:center;font-size:small;">
    <a href="https://github.com/darachm/dll-r/blob/main/LICENSE.md">
        Licensed Creative Commons Attribution-NonCommercial-ShareAlike 4.0
    </a>
</p>
<p style="text-align:center;font-size:small;">
    <a href="https://github.com/rstudio/bookdown" target="blank">
        Website typeset with bookdown
    </a>
</p>

<script> 
// This is to look through, everything that's a floating lone double dash,
// delete it. This is left over for stuff that's trying to be pauses for
// the slides
var listz = document.getElementsByTagName("p");
for (var i=0; i < listz.length; i++) { 
    if (listz[i].innerText === "–") { listz[i].innerText = "" } 
} 
</script>
            </section>

          </div>
        </div>
      </div>
<a href="day-4---tidyverse-and-visualizations.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tidyverse-12-functions-pipes.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/darachm/dll-r/edit/main/410-process-data.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["DLL 2021 R syllabus site.html"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
},
"highlight": "zenburn"
});
});
</script>

</body>

</html>
